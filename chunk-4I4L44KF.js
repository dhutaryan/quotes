import{$ as st,A as f,B as G,C as J,D as m,E as u,F as s,G as K,H as P,I as y,J as X,K as q,L as Z,M as tt,N as et,O as ot,S as it,U as nt,V as E,X as j,Y as rt,Z as k,_ as at,a as F,aa as ct,b as v,ba as mt,c as N,ca as ut,d as $,da as lt,e as M,ea as I,f as _,g as A,h as V,i as U,j as B,k as L,l as g,m as b,n as z,o as H,p as x,q as S,r as R,s as W,t as Y,u as a,v as p,w as c,x as w,y as d,z as h}from"./chunk-YHE6HMPC.js";var O={production:!0,api:"https://api.quotable.io"};var pt=(()=>{let t=class t{buildQueryParams(o){return o}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Q=(()=>{let t=class t{constructor(o,i){this._http=o,this._utilsService=i}random(){return this._http.get(O.api+"/random")}search(o){let i={page:o.page};o.author&&(i.author=o.author);let n=this._utilsService.buildQueryParams(i);return this._http.get(O.api+"/quotes",{params:n})}};t.\u0275fac=function(i){return new(i||t)(R(ot),R(pt))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function qt(e,t){if(e&1&&(m(0,"div",0),s(1,"qt-rating"),u(),m(2,"q",1),q(3),u(),m(4,"div",2),s(5,"qt-twitter-share-button",3),m(6,"p",4),q(7),u()()),e&2){let r=y();a(3),Z(r.quote.content),a(2),X("text",'"',r.quote.content,'" - ',r.quote.author,""),a(2),tt("\u2014 ",r.quote.author,"")}}function vt(e,t){e&1&&s(0,"qt-skeleton",5)(1,"qt-skeleton",6)}var D=(()=>{let t=class t{constructor(){this.isLoading=!1}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["qt-quote-card"]],inputs:{quote:"quote",isLoading:"isLoading"},decls:2,vars:1,consts:[[1,"quote-card-rating"],[1,"quote-card-content"],[1,"quote-card-bottom"],[3,"text"],[1,"quote-card-author"],["height","1.5rem",1,"quote-card-content"],["height","1.25rem","width","8rem",1,"quote-card-author"]],template:function(i,n){i&1&&d(0,qt,8,4)(1,vt,2,0),i&2&&f(0,n.quote&&!n.isLoading?0:1)},dependencies:[j,at,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;padding:1rem;background-color:var(--bg-card);border-radius:.5rem;box-shadow:var(--shadow-card)}.quote-card-content[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:2rem;font-weight:500;font-style:italic}.quote-card-bottom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.quote-card-author[_ngcontent-%COMP%]{margin-block:0;margin-left:auto;font-size:1.25rem}.quote-card-rating[_ngcontent-%COMP%]{align-self:flex-end;margin-top:-1rem;margin-right:-1rem;padding-right:.5rem;padding-top:.5rem}"],changeDetection:0});let e=t;return e})();function bt(e,t){e&1&&s(0,"qt-alert",0)}var ft=(()=>{let t=class t{constructor(o){this._quotesService=o,this.quote=c(null),this.isLoading=c(!1),this.isError=c(!1)}ngOnInit(){this._fetchQuote()}nextQuote(){this._fetchQuote()}_fetchQuote(){let o=this.quote();this.isLoading.set(!0),this.isError.set(!1),this._quotesService.random().pipe(A()).subscribe({next:i=>this.quote.set(i),error:()=>{this.isError.set(!0),this.quote.set(o)},complete:()=>this.isLoading.set(!1)})}};t.\u0275fac=function(i){return new(i||t)(p(Q))},t.\u0275cmp=g({type:t,selectors:[["qt-random-quote"]],decls:4,vars:4,consts:[["message","We couldn't load random quote. Try again later!"],[3,"quote","isLoading"],[1,"random-quote-next","outlined","primary",3,"disabled","click"]],template:function(i,n){i&1&&(d(0,bt,1,0,"qt-alert",0),s(1,"qt-quote-card",1),m(2,"button",2),P("click",function(){return n.nextQuote()}),q(3,` Next
`),u()),i&2&&(f(0,n.isError()?0:-1),a(),h("quote",n.quote())("isLoading",n.isLoading()),a(),h("disabled",n.isLoading()))},dependencies:[k,D],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-grow:1;gap:1rem;height:100%}.random-quote-next[_ngcontent-%COMP%]{align-self:flex-end}"],changeDetection:0});let e=t;return e})();function T(e){e||(Y(T),e=W(w));let t=new F(r=>e.onDestroy(r.next.bind(r)));return r=>r.pipe(B(t))}var xt=(e,t)=>t==null?null:t._id;function St(e,t){e&1&&s(0,"qt-alert",0)}function wt(e,t){if(e&1&&s(0,"qt-quote-card",3),e&2){let r=t.$implicit,o=y();h("quote",r)("isLoading",o.isLoading())}}function Pt(e,t){if(e&1){let r=K();m(0,"qt-pagination",4),P("pageChange",function(i){z(r);let n=y();return H(n.onChangePage(i))}),u()}e&2&&h("page",t.page)("totalPages",t.totalPages)}var gt=(()=>{let t=class t{constructor(o,i,n,l){this._quotesService=o,this._route=i,this._router=n,this._destroyRef=l,this.quotes=c(Array(10)),this.paginator=c(null),this.searchControl=new mt(null),this.isLoading=c(!1),this.isError=c(!1),this._queryParams$=this._route.queryParams.pipe(V())}ngOnInit(){let o=this._route.snapshot.queryParams.author;this.searchControl.patchValue(o,{emitEvent:!1}),this.searchControl.valueChanges.pipe(M(300),v(i=>i?i.trim().toLocaleLowerCase():null),_(),T(this._destroyRef)).subscribe(i=>{this._goToPage({page:1,author:i})}),this._fetchQuotesBasedOnQueryParams()}onChangePage(o){this._goToPage({page:o})}_fetchQuotesBasedOnQueryParams(){let o=this._getPageNumber$(),i=this._queryParams$.pipe(v(n=>n.author),_());N([o,i]).pipe(L(()=>this.isError.set(!1)),M(0),L(()=>this.isLoading.set(!0)),U(([n,l])=>this._quotesService.search({page:n,author:l})),T(this._destroyRef)).subscribe({next:n=>{this.quotes.set(n.results),this.paginator.set({page:n.page,totalPages:n.totalPages}),this.isLoading.set(!1)},error:()=>{this.isError.set(!0),this.isLoading.set(!1)}})}_getPageNumber$(){return this._queryParams$.pipe(v(o=>Number(o.page)),$(o=>this._checkPageNumber(o)),_())}_checkPageNumber(o){return!o||o<1?(this._goToPage({page:1},!0),!1):!0}_goToPage(o,i=!1){return this._router.navigate(["/quotes","search"],{queryParams:o,queryParamsHandling:"merge",replaceUrl:i})}};t.\u0275fac=function(i){return new(i||t)(p(Q),p(it),p(nt),p(w))},t.\u0275cmp=g({type:t,selectors:[["qt-search-quote"]],decls:5,vars:3,consts:[["message","Your search request has been failed. Try another search query!"],["type","text","placeholder","Search by author",3,"formControl"],[3,"page","totalPages"],[3,"quote","isLoading"],[3,"page","totalPages","pageChange"]],template:function(i,n){if(i&1&&(d(0,St,1,0,"qt-alert",0),s(1,"input",1),G(2,wt,1,2,"qt-quote-card",3,xt),d(4,Pt,1,2,"qt-pagination",2)),i&2){let l;f(0,n.isError()?0:-1),a(),h("formControl",n.searchControl),a(),J(n.quotes()),a(2),f(4,(l=n.paginator())?4:-1,l)}},dependencies:[rt,st,ct,ut,k,D],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0});let e=t;return e})();var jt=[{path:"",pathMatch:"full",redirectTo:"random"},{path:"random",component:ft},{path:"search",component:gt}],Ct=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b({type:t}),t.\u0275inj=S({imports:[E.forChild(jt),E]});let e=t;return e})();var Ee=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b({type:t}),t.\u0275inj=S({imports:[et,j,lt,I,Ct]});let e=t;return e})();export{Ee as QuotesModule};
